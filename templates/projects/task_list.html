{% extends "base.html" %}
{% block title %}Tasks{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6 text-blue-600">Tasks</h2>

<a href="{% url 'task_create' %}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
    Add Task
</a>

<div class="overflow-x-auto mt-4">
  <table class="min-w-full bg-white rounded shadow overflow-hidden">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-3 border-b text-left">Title</th>
        <th class="p-3 border-b text-left">Project</th>
        <th class="p-3 border-b text-left">Assigned To</th>
        <th class="p-3 border-b text-left">Status</th>
        <th class="p-3 border-b text-left">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for t in tasks %}
      <tr class="hover:bg-gray-50">
        <td class="p-2 border-b">{{ t.title }}</td>
        <td class="p-2 border-b">{{ t.project.name }}</td>
        <td class="p-2 border-b">{{ t.assigned_to.email }}</td>
        <td class="p-2 border-b">
          <span class="px-2 py-1 rounded 
            {% if t.status == 'Pending' %}bg-yellow-100 text-yellow-800
            {% elif t.status == 'In Progress' %}bg-blue-100 text-blue-800
            {% elif t.status == 'Done' %}bg-green-100 text-green-800
            {% endif %}">
            {{ t.status }}
          </span>
        </td>
        <td class="p-2 border-b space-x-2">
          <a href="{% url 'task_edit' t.id %}" class="text-blue-600 hover:underline">Edit</a> |
          <a href="{% url 'task_delete' t.id %}" class="text-red-600 hover:underline" onclick="return confirm('Delete this task?')">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center p-3 text-gray-500">No tasks available.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
