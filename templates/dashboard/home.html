{% extends "base.html" %}
{% load widget_tweaks %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6 text-blue-600">Admin Dashboard</h2>

<!-- Count Cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-white p-6 rounded shadow text-center hover:shadow-lg transition">
        <h3 class="text-gray-500 mb-2">Total Users</h3>
        <p class="text-3xl font-bold">{{ total_users }}</p>
    </div>
    <div class="bg-white p-6 rounded shadow text-center hover:shadow-lg transition">
        <h3 class="text-gray-500 mb-2">Total Projects</h3>
        <p class="text-3xl font-bold">{{ total_projects }}</p>
    </div>
    <div class="bg-white p-6 rounded shadow text-center hover:shadow-lg transition">
        <h3 class="text-gray-500 mb-2">Active Tasks</h3>
        <p class="text-3xl font-bold">{{ total_active_tasks }}</p>
    </div>
</div>

<!-- Projects List -->
<h3 class="text-xl font-semibold mb-3 text-gray-700">Projects</h3>
<table class="table-auto w-full border mb-8">
    <thead class="bg-gray-100">
        <tr>
            <th class="p-2 border">Name</th>
            <th class="p-2 border">Created By</th>
            <th class="p-2 border">Created At</th>
        </tr>
    </thead>
    <tbody>
        {% for project in projects %}
        <tr class="hover:bg-gray-50">
            <td class="p-2 border">{{ project.name }}</td>
            <td class="p-2 border">{{ project.created_by.email }}</td>
            <td class="p-2 border">{{ project.created_at|date:"d M Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3" class="p-2 text-center text-gray-500">No projects available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Tasks List -->
<h3 class="text-xl font-semibold mb-3 text-gray-700">Tasks</h3>
<table class="table-auto w-full border">
    <thead class="bg-gray-100">
        <tr>
            <th class="p-2 border">Title</th>
            <th class="p-2 border">Project</th>
            <th class="p-2 border">Assigned To</th>
            <th class="p-2 border">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
        <tr class="hover:bg-gray-50">
            <td class="p-2 border">{{ task.title }}</td>
            <td class="p-2 border">{{ task.project.name }}</td>
            <td class="p-2 border">{{ task.assigned_to.email }}</td>
            <td class="p-2 border">
                {{ task.status|capfirst|cut:"_"|lower }}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="p-2 text-center text-gray-500">No tasks available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
